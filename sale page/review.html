<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Listing Details - WeRide</title>
  <link rel="stylesheet" href="/sale page/review.css" />
</head>
<body>
  <header>
    <div class="logo">WeRide</div>
    <nav>
      <ul class="nav-links">
        <li><a href="/home.html">Home</a></li>
        <li><a href="/rent pagte/rent.html">Rent</a></li>
        <li><a href="/sale page/sale.html" class="active">Buy</a></li>
      </ul>
    </nav>
  </header>

  <main class="layout">
    <section class="gallery">
      <div class="image-frame">
        <img id="main-img" src="" alt="Vehicle" />
      </div>
      <div class="thumbs" id="thumbs"></div>
      <div class="share-row">
        <button class="chip">Shortlist</button>
        <button class="chip">Share</button>
        <button class="chip">Report</button>
      </div>
    </section>

    <aside class="summary">
      <h1 id="title">Vehicle Title</h1>
      <div class="location" id="location">City</div>
      <div class="price" id="price">Rs. 0</div>

      <div class="seller">
        <div class="avatar" aria-hidden="true">ðŸ‘¤</div>
        <div class="meta">
          <div class="name" id="seller-name">Seller</div>
          <div class="phone" id="seller-phone">â€”</div>
        </div>
      </div>
      <div class="quick-actions">
        <button class="qa">Get all details</button>
        <button class="qa">Schedule a visit</button>
        <button class="qa">Negotiate price</button>
      </div>
    </aside>
  </main>

  <section class="details">
    <h2>Over View</h2>
    <div class="table">
      <div class="row"><div>Ad</div><div id="ovr-title"></div></div>
      <div class="row"><div>Year</div><div id="ovr-year"></div></div>
      <div class="row"><div>KMs Driven</div><div id="ovr-km"></div></div>
      <div class="row"><div>No Plate</div><div id="ovr-plate">â€”</div></div>
      <div class="row"><div>Added</div><div id="ovr-added">Recently</div></div>
      <div class="row"><div>Owner</div><div id="ovr-owner"></div></div>
      <div class="row"><div>Location</div><div id="ovr-city"></div></div>
      <div class="row"><div>Condition</div><div id="ovr-condition">Excellent</div></div>
      <div class="row"><div>Engine</div><div id="ovr-cc"></div></div>
    </div>
  </section>

  <section class="desc">
    <h2>Description</h2>
    <p id="description">Fresh condition, regularly serviced and carefully used.</p>
  </section>

  <footer>
    <p>&copy; 2025 WeRide. All rights reserved.</p>
  </footer>

  <script>
    (function(){
      function get(param, fallback){
        var v = new URLSearchParams(window.location.search).get(param);
        return v !== null && v !== '' ? v : fallback;
      }
      var data = {
        title: get('title','Vehicle'),
        price: parseInt(get('price','0'),10) || 0,
        city: get('city',''),
        km: parseInt(get('km','0'),10) || 0,
        cc: parseInt(get('cc','0'),10) || 0,
        year: parseInt(get('year','0'),10) || '',
        owner: get('owner','1st'),
        img: get('img',''),
        photos: parseInt(get('photos','1'),10) || 1,
        seller: get('seller','Owner'),
        phone: get('phone','')
      };

      function rs(n){ return 'Rs. ' + Number(n).toLocaleString('en-IN'); }

      document.title = data.title + ' - WeRide';
      document.getElementById('title').textContent = data.title;
      document.getElementById('location').textContent = data.city;
      document.getElementById('price').textContent = rs(data.price);
      document.getElementById('seller-name').textContent = data.seller;
      document.getElementById('seller-phone').textContent = data.phone || 'Hidden';

      document.getElementById('ovr-title').textContent = data.title;
      document.getElementById('ovr-year').textContent = data.year;
      document.getElementById('ovr-km').textContent = data.km + ' KM';
      document.getElementById('ovr-owner').textContent = data.owner + ' Owner';
      document.getElementById('ovr-city').textContent = data.city;
      document.getElementById('ovr-cc').textContent = data.cc + ' CC';

      var mainImg = document.getElementById('main-img');
      var thumbs = document.getElementById('thumbs');
      if (data.img) { mainImg.src = data.img; }
      for (var i=0;i<data.photos;i++){
        var t = document.createElement('img');
        t.src = data.img; t.alt = 'Photo ' + (i+1);
        t.addEventListener('click', function(e){ mainImg.src = e.target.src; });
        thumbs.appendChild(t);
      }

      // Protect quick actions: require login on click
      function requireAuthAction(handler){
        return function(){
          if (!localStorage.getItem('weride_authed')){
            var red = encodeURIComponent(window.location.pathname + window.location.search + '#action');
            window.location.href = '/login.html?redirect=' + red;
            return;
          }
          handler && handler();
        }
      }
      var chips = document.querySelectorAll('.chip, .qa');
      chips.forEach(function(btn){ btn.addEventListener('click', requireAuthAction(function(){ alert('Action recorded.'); })); });
    })();
  </script>
</body>
</html>


