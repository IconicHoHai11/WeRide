<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Buy Used Vehicles - WeRide</title>
  <link rel="stylesheet" href="/sale page/sale.css" />
</head>
<body>
  <header>
    <div class="logo">WeRide</div>
    <nav>
      <ul class="nav-links">
        <li><a href="/home.html">Home</a></li>
        <li><a href="/rent pagte/rent.html">Rent</a></li>
        <li><a href="#" class="active">Buy</a></li>
        <li><a href="/login.html">Login</a></li>
        <li><a href="/about.html">About Us</a></li>
        <li><a href="/contact.html">Contact Us</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="page-title">
      <h1>Used Scooters Available</h1>
      <div class="sort">
        <label for="sort">Sort by</label>
        <select id="sort">
          <option value="date-desc">Date: New-Old</option>
          <option value="price-asc">Price: Low-High</option>
          <option value="price-desc">Price: High-Low</option>
          <option value="km-asc">Kilometers: Low-High</option>
          <option value="km-desc">Kilometers: High-Low</option>
          <option value="year-desc">Model Year: New-Old</option>
          <option value="year-asc">Model Year: Old-New</option>
        </select>
      </div>
    </div>

    <section class="layout">
      <aside class="filters">
        <div class="filters-header">
          <h3>Filters</h3>
          <button id="resetFilters" class="link">Reset all</button>
        </div>

        <div class="filter-group">
          <label class="label">Search by city or model</label>
          <input type="text" id="search" placeholder="Search..." />
        </div>

        <div class="filter-group">
          <label class="label">Budget (max)</label>
          <div class="range-row">
            <input type="range" id="budget" min="15000" max="150000" step="5000" value="150000" />
            <span id="budgetValue">Rs. 1,50,000</span>
          </div>
          <div class="preset-list">
            <label><input type="radio" name="budgetPreset" value="30000" /> Rs. 15,000 - 30,000</label>
            <label><input type="radio" name="budgetPreset" value="50000" /> Rs. 30,000 - 50,000</label>
            <label><input type="radio" name="budgetPreset" value="70000" /> Rs. 50,000 - 70,000</label>
            <label><input type="radio" name="budgetPreset" value="100000" /> Rs. 70,000 - 1 Lakh</label>
            <label><input type="radio" name="budgetPreset" value="150000" /> Rs. 1 - 1.5 Lakh</label>
          </div>
        </div>

        <div class="filter-group">
          <label class="label">Type</label>
          <label><input type="checkbox" class="type" value="scooter" checked /> Scooter</label>
          <label><input type="checkbox" class="type" value="motorbike" checked /> Motorbike</label>
        </div>

        <div class="filter-group">
          <label class="label">Owner</label>
          <label><input type="checkbox" class="owner" value="1st" /> 1st Owner</label>
          <label><input type="checkbox" class="owner" value="2nd" /> 2nd Owner</label>
        </div>
      </aside>

      <section class="results">
        <div id="resultsCount" class="results-count"></div>
        <div id="grid" class="grid"></div>
      </section>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 WeRide. All rights reserved.</p>
  </footer>

  <script>
    // Redirect to login if not authed when arriving via deep link intent
    (function(){
      if (!localStorage.getItem('weride_authed')) {
        // allow browsing catalog, but enforce auth on details click only
      }
    })();

    // Sample inventory (can be replaced with API later)
    var vehicles = [
      { id: 1, title: '2025 Yamaha RAY ZR', city: 'Kathmandu', price: 30000, km: 3000, cc: 113, type: 'scooter', owner: '1st', year: 2025, photos: 4, img: '/images/ntorq.webp' },
      { id: 2, title: '2019 Aprilia SR 150', city: 'Kathmandu', price: 95000, km: 22500, cc: 125, type: 'scooter', owner: '2nd', year: 2019, photos: 2, img: '/images/dio.jpeg' },
      { id: 3, title: '2017 Honda Dio', city: 'Kathmandu', price: 125000, km: 29000, cc: 110, type: 'scooter', owner: '1st', year: 2017, photos: 3, img: '/images/dio.jpeg' },
      { id: 4, title: '2018 KTM Duke 200', city: 'Lalitpur', price: 140000, km: 27000, cc: 200, type: 'motorbike', owner: '2nd', year: 2018, photos: 5, img: '/images/Ktm_duke_390.jpg' }
    ];

    var state = {
      search: '',
      budget: 150000,
      types: new Set(['scooter','motorbike']),
      owners: new Set(),
      sort: 'date-desc'
    };

    function formatRs(n) {
      return 'Rs. ' + n.toLocaleString('en-IN');
    }

    function render() {
      var filtered = vehicles.filter(function(v){
        var matchesSearch = state.search === '' || (v.title + ' ' + v.city).toLowerCase().includes(state.search);
        var matchesBudget = v.price <= state.budget;
        var matchesType = state.types.has(v.type);
        var matchesOwner = state.owners.size === 0 || state.owners.has(v.owner);
        return matchesSearch && matchesBudget && matchesType && matchesOwner;
      });

      switch(state.sort){
        case 'price-asc': filtered.sort(function(a,b){return a.price-b.price;}); break;
        case 'price-desc': filtered.sort(function(a,b){return b.price-a.price;}); break;
        case 'km-asc': filtered.sort(function(a,b){return a.km-b.km;}); break;
        case 'km-desc': filtered.sort(function(a,b){return b.km-a.km;}); break;
        case 'year-asc': filtered.sort(function(a,b){return a.year-b.year;}); break;
        case 'year-desc': filtered.sort(function(a,b){return b.year-a.year;}); break;
        default: break;
      }

      document.getElementById('resultsCount').textContent = filtered.length + ' results';

      var grid = document.getElementById('grid');
      grid.innerHTML = '';
      filtered.forEach(function(v){
        var card = document.createElement('div');
        card.className = 'card';
        var url = '/sale page/review.html' +
          '?title=' + encodeURIComponent(v.title) +
          '&price=' + encodeURIComponent(v.price) +
          '&city=' + encodeURIComponent(v.city) +
          '&km=' + encodeURIComponent(v.km) +
          '&cc=' + encodeURIComponent(v.cc) +
          '&year=' + encodeURIComponent(v.year) +
          '&owner=' + encodeURIComponent(v.owner) +
          '&photos=' + encodeURIComponent(v.photos) +
          '&img=' + encodeURIComponent(v.img);
        card.innerHTML = '\
          <div class="media">\
            <img src="' + v.img + '" alt="' + v.title + '">\
            <div class="photos">' + v.photos + ' Photos</div>\
          </div>\
          <div class="body">\
            <h3>' + v.title + '</h3>\
            <div class="price">' + formatRs(v.price) + '</div>\
            <div class="meta">' + v.km + ' KM • ' + v.cc + ' CC • ' + v.city + '</div>\
            <div class="actions">\
              <a class="btn-view" href="' + url + '">View Details</a>\
              <button class="btn-like" title="Save">❤</button>\
            </div>\
          </div>';
        grid.appendChild(card);
      });
    }

    // UI bindings
    var searchInput = document.getElementById('search');
    searchInput.addEventListener('input', function(){ state.search = searchInput.value.trim().toLowerCase(); render(); });

    var budgetInput = document.getElementById('budget');
    var budgetValue = document.getElementById('budgetValue');
    function updateBudget(val){ state.budget = parseInt(val,10); budgetValue.textContent = 'Rs. ' + Number(val).toLocaleString('en-IN'); render(); }
    budgetInput.addEventListener('input', function(){ updateBudget(budgetInput.value); });
    document.querySelectorAll('input[name="budgetPreset"]').forEach(function(r){ r.addEventListener('change', function(){ budgetInput.value = r.value; updateBudget(r.value); }); });

    document.querySelectorAll('.type').forEach(function(cb){ cb.addEventListener('change', function(){ if(cb.checked) state.types.add(cb.value); else state.types.delete(cb.value); render(); });});
    document.querySelectorAll('.owner').forEach(function(cb){ cb.addEventListener('change', function(){ if(cb.checked) state.owners.add(cb.value); else state.owners.delete(cb.value); render(); });});

    document.getElementById('sort').addEventListener('change', function(e){ state.sort = e.target.value; render(); });
    document.getElementById('resetFilters').addEventListener('click', function(){
      searchInput.value = '';
      state.search = '';
      budgetInput.value = 150000; updateBudget(150000);
      document.querySelectorAll('input[name="budgetPreset"]').forEach(function(r){ r.checked = false; });
      state.types = new Set(['scooter','motorbike']);
      document.querySelectorAll('.type').forEach(function(cb){ cb.checked = true; });
      state.owners = new Set();
      document.querySelectorAll('.owner').forEach(function(cb){ cb.checked = false; });
      document.getElementById('sort').value = 'date-desc';
      render();
    });

    // initial render
    render();
  </script>
</body>
</html>


